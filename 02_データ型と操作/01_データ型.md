# データ型

## TODO
- 値型データ（例えば構造体）でプロパティを直接（Foo.property = xxx）のように書き換えた場合も値型データまるまるコピーが作られるの？

## 目次
- 主要データ型
- 値型と参照型
- var と let とデータ型


## 主要データ型

<font color="gray"><small>主要な値とそれを格納するデータ型</small></font>

|値|データ型|説明|
|:--|:--|:--|
|数値|Int, UInt, Float など|整数や小数|
|文字|Character など|1 文字|
|文字列|String|文字列|
|配列|Array|同じデータ型の値のリスト|
|辞書|Dictionary|キーとそれに対応する値の集まり|
|集合|Set|同じデータ型の値の集まり。配列と違うところは値同士に順番が無い。|
|タプル|(T, V)|データ型の異なる複数個のデータの組み|
|論理|Bool|真または偽|


## 値型と参照型
- データ型はメモリ上のデータの保持の仕方で 2種類に分類される。
	- **値型データ**
		- 値そのものを表すデータ。
		- それを変数や関数の引数に渡す際にデータのコピーが作られて渡される。
	- **参照型データ**
		- 値の参照を表すデータ。
		- それを変数や関数の引数に渡す際にその参照が渡される。
- 値型データの操作でコピーが作られる例
	- 変数や定数への代入
	- 関数の引数に渡す
	- 値型データのプロパティ変更（mutating メソッド、ドッド(.)参照での直書き換えもコピーになる？）
- 何が値型データで、何が参照型データなのか？
	- クラスは参照型データ
	- それ以外（構造体、列挙型）は値型データ

<small>**例.** 値型データの変数代入によるコピー</small>
```Swift
struct Foo {
    var num: Int
    var bar: Bar
    init(_ num: Int, _ bar: Bar) {
        self.num = num
        self.bar = bar
    }
}

class Bar {
    var b: Int
    init(_ b: Int) {
        self.b = b
    }
}

var foo1 = Foo(1, Bar(10))
var foo2 = foo1  // foo1 のコピーが foo2 変数に代入される。bar は参照型なので参照値がコピー

foo2.num = 2
foo2.bar.b = 20
print("\(foo1.num), \(foo1.bar.b)")	// 1, 20
print("\(foo2.num), \(foo2.bar.b)")	// 2, 20
```


## var と let とデータ型
- let では定数の値を変更できないが、この変更できないものがデータ型によって異なる。
	- 参照型 → 参照
	- 値型 → 値そのもの
- 参照型データは定数に入った参照が変更できないだけで、インスタンス内のプロパティは変更できる。一方、値型データはプロパティの変更を値そのもののコピーを作って行うのでインスタンス内のプロパティ変更すらできない。


```Swift
struct A {
    var x: Int = 0
}

class B {
    var x: Int = 0
}

var a1 = A()
a1.x = 1	// 成功

let a2 = A()
a2.x = 2	// コンパイルエラー

var b1 = B()
b1.x = 1	// 成功

let b2 = B()
b2.x = 2	// 成功
```
